		;编写者：顾时禹
		;函数名：FUNC6, GETVALUE
		
		NAME FUNC6
		PUBLIC FUNC6
		EXTERN F2TO10:NEAR, NOTSELECTEDT:BYTE, NOTBOSST:BYTE, BPRICET:BYTE, SPRICET:BYTE, BAMOUNTT:BYTE, SAMOUNTT:BYTE, VALUE:BYTE, SEPARATOR:BYTE, AUTH:BYTE, GOOD:WORD, CRLFT:BYTE
PRINT	MACRO A						;打印文字
		LEA DX, A
		MOV AH, 09H
		INT 21H
		ENDM
CRLF	MACRO						;回车
		LEA DX, CRLFT
		MOV AH, 09H
		INT 21H
		ENDM
CHANGEVALUE MACRO A, B
		LOCAL C
C:		PRINT A
		MOV AX, B[BX]
		LEA SI, VALUE
		CALL F2TO10
		MOV BYTE PTR [SI], '$'
		PRINT VALUE
		PRINT SEPARATOR
		CALL GETVALUE
		CMP DI, 1
		JE C
		MOV B[BX], DX
		ENDM
CODE 	SEGMENT USE16 PARA PUBLIC 'CODE'
		ASSUME CS:CODE
FUNC6 	PROC
		CMP AUTH, 0
		JE NOT_BOSS
		CMP GOOD, 0
		JE	NOT_SELECTED
		MOV BX, GOOD
		CHANGEVALUE BPRICET, 11
		CHANGEVALUE SPRICET, 13
		CHANGEVALUE BAMOUNTT, 15
		CHANGEVALUE SAMOUNTT, 17
		RET
NOT_SELECTED:
		PRINT NOTSELECTEDT
		CRLF
		RET
NOT_BOSS:
		PRINT NOTBOSST
		CRLF
		RET
FUNC6	ENDP

GETVALUE PROC
		PUSH AX
		PUSH CX
		XOR DI, DI
		XOR CX, CX
		XOR DX, DX
LOOP1:	MOV AH, 01H
		INT 21H
		CMP AL, 0DH
		JE RETURN
		CMP AL, 0AH
		JE RETURN
		CMP AL, '0'
		JB ERR
		CMP AL, '9'
		JA ERR
		SUB AL, '0'
		MOV CL, AL
		MOV AX, DX
		MOV DX, 10
		MUL DX
		ADD AX, CX
		MOV DX, AX
		JMP LOOP1
ERR:	CRLF
		MOV DI, 1
		POP CX
		POP AX
		RET
RETURN: POP CX
		POP AX
		RET
GETVALUE ENDP
CODE	ENDS
		END